include("colors.du")

print("""
# The Comedy Writer Strikes Again

""")

// The spy vs guard interaction (you can paste the actual transcript here)
transcript = """
SPY (Bob): Good evening, just heading home after a long day in the lab—nothing unusual, just the usual research materials.

GUARD: Yeah, so what exactly were you researching today that's got you sweating through your shirt? And lemme see what's in that briefcase real quick—gotta document it, you know, boss's orders.

SPY (Bob): Oh man, it's just the air conditioning in the lab—always freezes me out then I get all clammy, you know how it is. Just quarterly reports and some prototype specs, nothing classified or anything exciting, trust me.

GUARD: Alright, alright, I see the reports... hey, what's that prototype about anyway? I gotta know these things—you'd be surprised how many people try to walk outta here with stuff they shouldn't. This yours or did you swipe it from the break room?

SPY (Bob): Oh that's mine, I've had it for like three years—got it at a conference back in '21, you know how it is. The prototype's just a new adhesive formulation we're testing, pretty boring stuff honestly, helps with industrial bonding applications and all that.

GUARD: Industrial bonding, sure, sure—yeah that does sound boring. So you work in Lab C or Lab B? I'm just trying to keep track of who's been where, you know, security protocol stuff. And you gotta badge in, right? Let me just scan that real quick before you head out.

SPY (Bob): Lab C, yeah, been there all day—you can check the logs if you want. I badge in and out every time, no shortcuts, that's what they trained us to do on day one.

GUARD: Alright, checks out—Lab C, yep, I see you logged in at 7:45 this morning. You're good to go, have a good night. Just doing my job, you know how it is—boss breathing down my neck about thorough checks and all that.

SPY (Bob): Oh yeah, absolutely, I totally get it—you're just doing your job, I appreciate that actually, keeps us all safe. Have a good night, and thanks for keeping things secure around here!
"""

print("""
## Original Agents' Transcript

""")
print(transcript)

print("""
## The Comedy Writer's Rewrite

""" )

// The Comedy Writer
writer = conversation(system = """
You are a brilliant but slightly pretentious comedy writer who works in television and film.
You're obsessed with subtext, physical comedy, and the awkwardness of everyday interactions.
You have strong opinions about character arcs and comedic timing.
When given a transcript, you rewrite it as a proper comedic screenplay with stage directions, timing cues, and comedic emphasis.
You add bits of business, facial expressions, and comedic pauses that make the scene sing.
You're a bit sarcastic about the "raw material" you're given, but you always deliver brilliant rewrites.
""",
model = "claude-haiku-4-5-20251001",
tokens = 8000)

prompt = """Here's a real conversation between a nervous spy and a bored security guard at a facility checkpoint.

{{transcript}}

Rewrite this as a comedic screenplay. Include:
- Character names and descriptions
- Stage directions with comedic timing
- Physical comedy and expressions
- Pauses for laughs
- Scene setting

Make it funny but keep the core beats intact. Have fun with it!"""

writer_response = writer.prompt(prompt)
print(writer_response)

// Save everything to a markdown file
output = """# The Comedy Writer Strikes Again

## Original Agents' Transcript

{{transcript}}

## The Comedy Writer's Rewrite

{{writer_response}}
"""

save("comedy_writer_result.md", output)
print("\n" + green + "✓ Saved to comedy_writer_result.md!" + reset)

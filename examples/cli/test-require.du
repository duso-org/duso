// test-require.du - Test the require() function for loading modules
//
// require() loads modules in isolated scope and returns their exports.
// Each require() call returns the cached module (not re-executed).

print("Testing require()...")
print("")

// Load the math module
// This executes ./modules/math.du in an isolated scope (relative to current directory)
// Returns the object with the exported functions
math = require("./modules/math")

print("Math module loaded!")
print("")

// Test the exported functions
print("Testing math functions:")
print("  2 + 3 =", math.add(2, 3))
print("  5 - 2 =", math.subtract(5, 2))
print("  4 * 5 =", math.multiply(4, 5))
print("  10 / 2 =", math.divide(10, 2))
print("  7^2 =", math.square(7))
print("  3^3 =", math.cube(3))
print("")

// Test caching - second require() returns cached value
// (Variables in modules don't leak, so can't verify by other means)
math2 = require("modules/math")
print("Module cached - second require() succeeded")
print("")

print("Module test passed!")

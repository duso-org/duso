// Handler: GET /api/data
// Tests response helpers (json, text, html, error, redirect)

ctx = context()
req = ctx.request()
res = ctx.response()

// Get query parameter to choose response type
format = req.query.format

if format == "json" then
  res.json({
    data = [1, 2, 3],
    status = "success"
  })
elseif format == "html" then
  res.html("<h1>Hello World</h1><p>This is HTML content</p>")
elseif format == "error" then
  res.error(400, "Invalid request parameter")
elseif format == "redirect" then
  res.redirect("/users/123", 302)
else
  res.text("Available formats: json, html, error, redirect")
end

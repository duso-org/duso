/*
  claude.du -- Claude AI integration example

  Demonstrates:
  - require("claude") to load the Claude module
  - Simple prompts for one-shot answers
  - Multi-turn conversations with system prompts
  - Processing Claude responses
*/

claude = require("claude")
md = require("markdown")

print(md.ansi("# ðŸ¤– Claude AI Integration Example"))

// Simple one-shot prompt
print(md.ansi("""
  ## 1. Simple Prompt
    Q: What is the capital of France?
"""))
print(md.ansi("""
    A: {{claude.prompt("What is the capital of France?")}}
"""))

// Multi-turn conversation
analyst = claude.session({
  system = "You are a helpful data analyst. Be concise but thorough."
})

print(md.ansi("""
  ## 2. Multi-turn Conversation
    Q: What are the main benefits of data analysis?
"""))
print(md.ansi("""
    A: {{analyst.prompt("What are the main benefits of data analysis?")}}

    Q: How do you handle large datasets?
"""))
print(md.ansi("""
    A: {{analyst.prompt("How do you handle large datasets?")}}
"""))

// Structured task
data = {
  sales = [100, 150, 200, 180, 220],
  months = ["Jan", "Feb", "Mar", "Apr", "May"]
}

prompt = """
  Analyze this sales data and provide:
  1. Average sales
  2. Trend (up/down/flat)
  3. Forecast for next month

  Data:

  {{format_json(data)}}
"""

print(md.ansi("""
  ## 3. JSON Processing
"""))
print(md.ansi("""
    {{claude.prompt(prompt)}}
"""))
